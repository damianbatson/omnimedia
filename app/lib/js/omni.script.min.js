var counter=0,XMLdata,currentProjectImage=1,scrollDistance=[],contactDiv=$("#contactContainer"),skillDiv=$("#skillContainer"),currentProjectName;$(document).ready(function(){navigation.setAddressPlugin();loadContent.loadXMLfile("resources/portfolio.xml");navigation.preload(["resources/images/omnimedia-logo-3D.png"]);navigation.createMainNav();dragScroll.dragScrollable();$(window).resize(function(){loadContent.resize(true)})});var navigation={setAddressPlugin:function(){$.address.init(function(a){$("ul#mainnav li a").address(function(){return $(this).attr("href").replace(location.pathname,"")})}).change(function(a){var b=a.value.replace(/^.(\s+)?/,"").replace(/\/$/,"").split("/");navigation.mainNavPageSelect(b)})},preload:function(a){$(a).each(function(){$("<img />").attr("src",this).appendTo("#introColumnTwo").css({marginTop:0});$("#introColumnOne, #introColumnTwo, #introText").css({opacity:0}).children("img").pngFix()});$("#preloader").animate({opacity:0},600,function(){$(this).remove();$("#introColumnOne").delay(200).animate({opacity:1},850);$("#introColumnTwo").delay(600).animate({opacity:1},1200);$("#introText").delay(800).animate({opacity:1},1200)})},createMainNav:function(){$("#mainnavContainer #mainnav li a").each(function(a){$("#mainnavContainer #mainnav li:eq("+a+") a").delay(2400).animate({marginLeft:0},1200)});$("#mainnavContainer #mainnav li a").hover(function(){$(this).children("span.link").stop().animate({marginLeft:"100px"},350,"easeInBounce");$(this).children("span.bg").stop().animate({width:"200px"},350,"easeInCirc")},function(){$(this).children("span.bg").stop().animate({width:0},500,"easeOutCirc");$(this).children("span.link").stop().animate({marginLeft:"10px"},500,"easeOutBounce")});$("#workNav").hover(function(){$(this).next(".close").stop().animate({width:"100%"},400,function(){$("#workNav li ul").slideDown()})},function(){$("#workNav li ul").css("left","auto").slideUp(function(){$("#workNav").next(".close").stop().animate({width:"38px"},400)})});$(window).scroll(function(){var a=$(window).scrollTop()})},mainNavPageSelect:function(a){switch(a[1]){case"home":if(a.length>2){}else{pageSelect.showHome()}break;case"projects":if(a.length>2){loadContent.initialiseProjects(a[2])}else if(a.length>1){loadContent.setFirstProjectAddress()}break;case"skills":if(a.length>2){}else{pageSelect.showSkills()}break;case"contact":if(a.length>2){}else{pageSelect.showContact()}break}}};var loadContent={loadXMLfile:function(a){if(XMLdata==undefined){$.ajax({type:"GET",url:a,dataType:"xml",success:function(a){XMLdata=a;loadContent.parseXML(a)},error:function(a){}})}else{}},parseXML:function(a){},initialiseProjects:function(a){pageSelect.hideDisplayDiv();var b=[];$(XMLdata).find("project").each(function(){var a=$(this).find("name").text().toLowerCase().replace(/ /g,"-");b.push(a)});var c=$.inArray(a,b);if(c==currentProjectName){}else{loadContent.loadProjectData(c)}$(window).scrollTo("#projectContainer",700,{easing:"easeInOutQuad"})},setFirstProjectAddress:function(){var a=$(XMLdata).find("project:eq(0)").find("name").text().toLowerCase().replace(/ /g,"-");$.address.path("/html5/projects/"+a+"/")},resize:function(a){},loadProjectData:function(a){loadContent.loadProjectNames();loadContent.loadProjectImages(a);loadContent.loadProjectText(a);currentProjectName==a},loadProjectNames:function(){var a=[];$(XMLdata).find("project").each(function(){var b=$(this).find("name").text();a+='<li id="listItem"><a href="#">'+b+"</a></li>"});$("#projectNav").html(a);$("#projectNav li a").click(function(a){a.preventDefault?a.preventDefault():a.returnValue=false;var b=$(this).text().toLowerCase().replace(/ /g,"-");$("#viewport").stop().scrollTo(dragScroll.scrollPos(currentProjectImage),{duration:800});$("#scroller li").animate({opacity:1},800);$.address.path("/html5/projects/"+b+"/")})},loadProjectImages:function(a){var b=[];$(XMLdata).find("project:eq("+a+")").find("image").each(function(a){b+='<li id="projectListItem'+a+'"></li>';var c=$("<img>").attr("src",$(this).text()).load(function(){$("#projectListItem"+a+"").html(c).find("img").css("opacity",0).delay(400*a).animate({opacity:1},200)})});$("#scroller").html(b);loadContent.updateImagePosition()},updateImagePosition:function(){var a=1;$("#viewport").stop().scrollTo(dragScroll.scrollPos(a),{duration:700})},loadProjectText:function(a){var b=$(XMLdata).find("project:eq("+a+")").find("name").text();var c=$(XMLdata).find("project:eq("+a+")").find("description").text();var d=$(XMLdata).find("project:eq("+a+")").find("services").text();var e=$(XMLdata).find("project:eq("+a+")").find("link").text();var f='<a href="../../../resources/js/'+e+'" class="nonLink" target="_blank">'+e+"</a>";$("span#project-title").html(b).fadeIn();$("span#project-description").html(c);$("span#project-services").html(d);$("span#project-link").html(f)}};var dragScroll={scrollPos:function(a){number=0+338*(a-1)+3*(a-1);return number},dragScrollable:function(){$("#viewport").dragscrollable({acceptPropagatedEvent:true,axis:"y"});$("#scroller").mousedown(function(){$(this).addClass("closed");scrollDistance[0]=$("#viewport").scrollTop()});$("#scroller").mouseup(function(){scrollDistance[1]=$("#viewport").scrollTop();$(this).removeClass("closed");dragScroll.mouseDrag(scrollDistance[0],scrollDistance[1])})},mouseDrag:function(a,b){var c="",d=Math.abs(a-b);if(a<b){c="up"}else if(a>b){c="down"}if(c=="down"){currentProjectImage--;if(currentProjectImage<=0){currentProjectImage=1}$("#viewport").stop().scrollTo(dragScroll.scrollPos(currentProjectImage),{duration:600})}else if(c=="up"){currentProjectImage++;if(currentProjectImage>=$("#scroller li").length){currentProjectImage=$("#scroller li").length}$("#viewport").stop().scrollTo(dragScroll.scrollPos(currentProjectImage),{duration:600})}}};$.fn.pngFix=function(){if(!$.browser.msie||$.browser.version>=7){return $(this)}return $(this).each(function(){var a=$(this);var b=a.attr("src");a.attr("src","resources/images/x.gif").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='"+b+"')")})};if(!window.console||!console.firebug){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i)window.console[names[i]]=function(){}}var pageSelect={showHome:function(){pageSelect.hideDisplayDiv();$(window).scrollTo("#introContainer",700,{easing:"easeInOutQuad"})},showSkills:function(){function b(b){a=b;$("#"+b).fadeIn(400);$("."+b).parent().addClass("tabs-selected")}function c(c){$("#"+a).fadeOut(400);$("."+a).parent().removeClass("tabs-selected");b(c)}pageSelect.hideDisplayDiv();$(window).scrollTo("#skillContainer",700,{easing:"easeInOutQuad"});var a="";$("#section-1, #section-2, #section-3").hide();$(".section-1, .section-2, .section-3").parent().removeClass("tabs-selected");b("section-1");$(".leftTabs a").click(function(a){a.preventDefault?a.preventDefault():a.returnValue=false;c($(this).attr("class").split(" ")[0])});$(".tabs-container a.nextStepBtn").click(function(a){a.preventDefault?a.preventDefault():a.returnValue=false;c($(this).attr("class").split(" ")[0])})},showContact:function(){$(window).scrollTo("#contactContainer",700,{easing:"easeInOutQuad"})},showOverlay:function(){$("#overlay").fadeIn();$("#overlay").click(function(a){$.address.path("/html5/home/");a.preventDefault?a.preventDefault():a.returnValue=false;pageSelect.hideDisplayDiv(contactDiv)})},showDisplayDiv:function(){if(displayDiv==contactDiv){$("#contactContainer").delay(700).animate({marginBottom:"0px"},80,function(){pageSelect.showOverlay()})}else{}},hideDisplayDiv:function(a){if(a==contactDiv){$("#contactContainer").animate({marginBottom:"-120px"},60,function(){$("#overlay").fadeOut()});a=undefined}else if(a==skillDiv){alert("else")}}}